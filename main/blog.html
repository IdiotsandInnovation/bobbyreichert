<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J4PE57KXDN"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-J4PE57KXDN');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bobby Reichert | Blog</title>
    <!-- Load Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configure Tailwind - Dark mode ENABLED -->
    <script>
        tailwind.config = {
            darkMode: 'class', // Enable dark mode via the 'dark' class on <html>
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#4f46e5', // Indigo-600
                        'primary-dark': '#a5b4fc' // Indigo-300 for dark mode accent
                    }
                }
            }
        }
    </script>
    <style>
        /* Set the Inter font globally */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            /* No fixed background color here, let Tailwind classes handle it */
        }
        
        /* Custom scrollbar for a cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        /* Light Mode Scrollbar */
        ::-webkit-scrollbar-thumb {
            background: #d1d5db; /* Gray-400 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-track {
            background: #f7f9fc; /* Very light grey/blue background */
        }
        /* Dark Mode Scrollbar Overrides */
        .dark ::-webkit-scrollbar-thumb {
            background: #4b5563; /* Gray-600 */
        }
        .dark ::-webkit-scrollbar-track {
            background: #111827; /* Gray-900 background */
        }

        /* Custom styles for the fixed cookie banner transition (used by JS to hide it smoothly) */
        .fade-out {
            opacity: 0 !important;
            transform: translateY(100%) !important;
            pointer-events: none;
        }
        /* Custom styles for dropdown visibility and transition */
        .dropdown-menu {
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s ease-out;
        }

        .dropdown-menu.visible {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        
        #mobile-menu {
            transform: translateX(100%);
            transition: transform 0.3s ease-out;
            pointer-events: none; 
        }
        #mobile-menu.open {
            transform: translateX(0);
            pointer-events: auto; 
        }
      
        #scroll-to-top {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            transform: scale(0.8);
            cursor: pointer;
        }
        #scroll-to-top.show {
            opacity: 1; /* Changed from 0.7 to 1 so the blur and semi-transparent bg work correctly */
            transform: scale(1);
        }

        /* Custom style for disabled button state */
        .submit-disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
    </style>
</head>
<!-- Body now uses responsive dark/light mode classes -->
<body class="min-h-screen flex flex-col items-center transition-colors duration-300 bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100">

    <!-- 1. Header (Navigation) -->
    <!-- Nav uses responsive dark/light mode classes -->
    <nav class="w-full bg-white shadow-lg sticky top-0 z-20 dark:bg-gray-800 dark:shadow-xl">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                
                <div class="flex-shrink-0">
                    <span class="text-xl font-bold text-primary dark:text-primary-dark">Bobby Reichert</span>
                </div>
                
                <!-- Desktop Links & Dropdown -->
                <div class="hidden md:flex items-center space-x-3 md:space-x-4 text-sm md:text-base">
                    <!-- Links use responsive dark/light mode classes -->
                    <a href="home.html" class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary-dark font-medium p-2 rounded-md transition duration-150">Home</a>
                    <a href="about.html" class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary-dark font-medium p-2 rounded-md transition duration-150">Bio</a>
                    
                    <a href="#" class="text-gray-900 dark:text-gray-100 font-bold p-2 rounded-md bg-indigo-100 dark:bg-indigo-800 hover:bg-indigo-200 dark:hover:bg-indigo-700 transition">Blog</a>
                    <a href="contact.html" class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary-dark font-medium p-2 rounded-md transition duration-150">Contact</a>
                    
                    <!-- DROPDOWN MENU -->
                    <div id="more-dropdown" class="relative group">
                        <button type="button" class="text-gray-600 dark:text-gray-300 hover:text-primary dark:hover:text-primary-dark font-medium p-2 rounded-md transition duration-150 flex items-center" aria-expanded="false" aria-controls="more-menu-items">
                            More
                            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        
                        <!-- Dropdown Content uses responsive dark/light mode classes -->
                        <div id="more-menu-items" class="dropdown-menu absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white dark:bg-gray-700 ring-1 ring-black ring-opacity-5 dark:ring-gray-600 z-30">
                            <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="more-dropdown">
                                <a href="archived-blogs.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-primary transition duration-150" role="menuitem">
                                    Archived Blogs
                                </a>
                                <a href="changelog.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-primary transition duration-150" role="menuitem">
                                    Changelog
                                </a>
                                <a href="planned-features.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-primary transition duration-150" role="menuitem">
                                    Future Features
                                </a>
                                <a href="settings.html" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-primary transition duration-150" role="menuitem">
                                    Settings
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile Menu Button -->
                <div class="md:hidden">
                    <button id="mobile-menu-button" type="button" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 inline-flex items-center justify-center p-2 rounded-md transition duration-150" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <!-- Hamburger Icon -->
                        <svg id="hamburger-icon" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                        <!-- Close Icon (X) -->
                        <svg id="close-icon" class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- ðŸ”´ START: MOBILE MENU PANEL ðŸ”´ -->
    <!-- Mobile menu uses responsive dark/light mode classes -->
    <div id="mobile-menu" class="fixed inset-0 top-16 w-full h-full md:hidden z-10 bg-white dark:bg-gray-900 overflow-y-auto">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 flex flex-col">
            <!-- Main Links use responsive dark/light mode classes -->
            <a href="home.html" class="text-lg font-medium block px-3 py-2 rounded-md text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-primary transition duration-150">Home</a>
            <a href="about.html" class="text-lg font-medium block px-3 py-2 rounded-md text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-primary transition duration-150">Bio</a>
            <!-- Highlighted item uses responsive dark/light mode classes -->
            <a href="#" class="text-lg block px-3 py-2 rounded-md text-primary dark:text-primary-dark bg-indigo-50 dark:bg-indigo-900 font-semibold transition duration-150">Blog (Current)</a>
            <a href="contact.html" class="text-lg font-medium block px-3 py-2 rounded-md text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-primary transition duration-150">Contact</a>
            
            <div class="h-px w-full my-2 bg-gray-200 dark:bg-gray-700"></div>

            <!-- "More" Dropdown Items use responsive dark/light mode classes -->
            <a href="archived-blogs.html" class="text-md block px-3 py-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-primary transition duration-150">Archived Blogs</a>
            <a href="changelog.html" class="text-md block px-3 py-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-primary transition duration-150">Changelog</a>
            <a href="planned-features.html" class="text-md block px-3 py-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-primary transition duration-150">Future Features</a>
            <a href="settings.html" class="text-md block px-3 py-2 rounded-md text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-primary transition duration-150">Settings</a>
        </div>
    </div>
    <!-- ðŸ”´ END: MOBILE MENU PANEL ðŸ”´ -->
    <!-- Main Content Area: Blog Posts -->
    <main class="w-full max-w-8xl flex-grow p-4 md:p-8">
        
        <div class="bg-white dark:bg-gray-800 shadow-xl rounded-2xl p-6 md:p-10 w-full dark:shadow-2xl">

            <h1 class="text-4xl font-extrabold text-gray-900 dark:text-gray-100 tracking-tight mb-4 text-center">
                Blog Posts
            </h1>
            <p class="text-xl font-light text-primary dark:text-primary-dark mb-6 text-center">
                I'll occasionally post something here.
            </p>
            <!-- Blog Post 20 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/20/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    Welp the 3D printer arrived today. So far I still haven't made anything on Autodesk (con)Fusion, and have only been using files from Bambu Handy. I downloaded Bambu Studio on my Raspberry Pi. Also I now have proof theat Vince is making up the reading guide questions. Today at thew start of the class he accidentally had a Word document pulled up on the big screen and he was typing up the RG questions on the spot without even referencing notes or maybe a past RG. Also today Sanvi said that John Adams was the first US president and Republicans are eagles and Dems are pigs. She also says that Egypt fought in WWI and won. In the next major update to this website, I plan to make some UI changes so this site is less boring and bland.
                </p>
            </section>
            <!-- Blog Post 19 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/19/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    I got VS Code on my school computer, but the git config is a bit weird, so I am unable to push to GitHub. Speaking of this website, it seems unaffected by the CloudFlare outage, which has taken down many sites, including ChatGPT and even parts of College Board (the organization that makes the AP, PSAT, and SAT exams). I also now practice for the SAT during advisory. Also, today is exactly one year ago was the crazy bomb cyclone. Time flies. I also have another potential 8th-grade quote:
                    <p class="leading-relaxed border-l-4 border-blue-300 dark:border-primary-dark pl-4 italic text-gray-500 dark:text-gray-400">
                        "What separates the winners from the losers is how a person reacts to each new twist of fate." -Donald Trump
                    </p>
                    
                </p>
            </section>
            <!-- Blog Post 18 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/18/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    For some reason, when I ordered the 3D printer, it said that the backorder would take weeks to ship. But now, randomly, the 3D printer is now out for shipping. Bambulab also ships their packages in a pretty weird way. The order is split into five parts, and I have some packages shipping FedEx, some through UPS, and some through this thing called "Yun Express" or something. The printer is arriving on Friday, but I don't know when the filament or AMS will come. Also, I got an 100 on the skeleton parts quiz.
                </p>
            </section>
            <!-- Blog Post 17 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/17/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    Expect shorter and fewer blog posts from now on because I have officially gotten a spot to take the SAT on December 6th. So, I have to study really hard for the next couple of weeks (especially for the math section. The ELA section seems to be fairly easy). I also got a Bambulab P1S 3D printer with the AMS 2 Pro. The printer was on a $529 off discount (since the P2S just released and it's also almost Black Friday), and the filament that came with it totaled up to $98 in savings. However, the P1S is on backorder, so I don't know when it will actually ship. The AMS is already in transit though. Today in science there was a quiz on parts of the skeleton. I'm 95% sure I got an 100. Also, I have attempted to do some backend using Google Firebase, but it just refuses to work (hence the comments section below). I also rolled out update 1.24 over the weekend. Some pages still need a bit of formatting after 1.24.
                </p>
            </section>
            <!-- Blog Post 16-->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/14/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                I now have a couple more 8th grade quotes to consider. They are:
                
                <p class="leading-relaxed border-l-4 border-blue-300 dark:border-primary-dark pl-4 italic text-gray-500 dark:text-gray-400">
                    "By losing a battle you can learn new ways to win the war" -Donald Trump
                </p>
                <br>
                <p class="leading-relaxed border-l-4 border-blue-300 dark:border-primary-dark pl-4 italic text-gray-500 dark:text-gray-400">
                    "Learn from others' mistakes, not your own. It's much cheaper that way." -Donald Trump
                </p>
                Also in class today, Vince said, "You know what middle school boys like to do when they're bored: they like to show off their asses"
                </p>
            </section>
            <!-- Blog Post 15 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/12/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    Today I played the first Gimkit game with Jayson in 145 days. It was really fun. I think I've decided my 8th grade quote. Vince also gave us a dodgeball game during 4th period.
                </p>
            </section>
            <!-- Blog Post 14 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/11/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    There was no school today, so I worked on this website quite a bit. Now I'm on track to complete update 1.24 on 11/15. I also tried learning to use the CNC machine, and it's pretty complicated. I got an 100 on the Scott essay. We also only get 1 PE day this week. I'm currently trying to think of an 8th-grade quote for the yearbook. Two potential ones (that are very different) are: "I don't know" -Mike Johnson, and "You don't realize something was important to you until it's gone."
                </p>
            </section>
            <!-- Blog Post 13 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/10/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    Today I got my second monitor working on my RPi 4. Turns out, the HDMI cable was bad. I now use the second display for coding and the first for everything else. I have tomorrow off, so I'm going to try to learn to use the CNC machine and update this website. I also just found out that my robotics team spent $200+ on lunch yesterday when we could've just spent $20. They also want to laser cut the metal drivetrain parts without CNCing wood for prototyping first. They're such money wasters, and half the parents don't even contribute money to the team. Tomorrow I'll also maybe call Jayson and Neel. Brendan still hasn't given me his Skype (now Teams, ðŸ–• Microsoft). I'll also CAD a v3 or v2+ robot and learn CAM.
                </p>
            </section>
            <!-- Blog Post 12 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/09/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    The robotics competition was good. We currently have 1st place in our interleague because on the last match, we got really lucky and scored a 'motif' during auto, and we got 6 ranking points, pushing us up to first from fourth. I also upgraded my Pi setup to use two monitors but one of them doesn't work.
                </p>
            </section>
            <!-- Blog Post 11 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/08/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    Tomorrow I have a robotics competition in Snoqualmie. Today we were doing some sort of outreach event and I borrowed a CNC machine from a friend in Olympia. I still need to learn how to use it. I'm also not sure that I can roll out the dark mode and settings menu before 11/15 because I'm so busy this time of the year. I also haven't read the entire Hiroshima book yet. I need to wake early tomorrow and it's 11:33 PM right now. On Friday in U.S. History, Scott apparently was teaching WA politics and Bob Fergusen and Dave Reichert and he joked, "It's a good thing that Caden and Brendan aren't in here".
                </p>
            </section>
            <!-- Blog Post 10 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/06/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    Lua gave more time during the test today, and I got an 100% on Big Ideas. I might have lost a couple of points on showing work, since my compass line was very faint. I got an 100% in the most recent (double-sided) reading guide. Wayne got 1.5 off on the second question but Vince was so lazy to calculate the score that he just gave Wayne a 10/10. In Scott's class, I have a summative assessment on Monday, which means I have a 90% chance of losing my 99 in Social Studies. It's on this book called Hiroshima by John Hersey. In science, we also have a short project and the due date is TBD. I've also completely made the switch to editing this site on VS Code on my RPi 4B. Cloudflare hosting is actually really good compared to W3spaces.
                </p>
            </section>
            <!-- Blog Post 9 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/05/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    In Geometry, there was a test that Lua said was "very short" but at the end of the period, half the people weren't done, and she says she probably will just have to grade what we have. So, half the class is extremely pissed at her (especially Julia, who was crashing out the rest of the day) and Wayne said he'll strangle her the next chance he gets. I'm really pissed too because I was part of the group that didn't finish. I really hope she gives extra time tomorrow. Also, we didn't have to play basketball today.
                </p>
            </section>
            <!-- Blog Post 8 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/04/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    I somehow destroyed my off-brand RPi Camera. While I was testing the camera feed, the camera ribbon came off and when I reconnected it, something shorted, but I still don't know what. Now the camera module doesn't work on either of my Pis. Also, today in English I got my grade back after Vince entered it wrong last week. In PE, Vince left to go take a s** session and some fentanyl, so Lyle was subbing and we played Capture the Flag. Tomorrow we have to play basketball because stupid Appoline wanted to. I hate Vince's "basketball" because its just a long game of bump where everyone shoots once, and then this stupid 'poison' thing. I think that Appoline likes it because she/he/they (I don't even know) can just sit on the side most of the period.
                </p>
            </section>
            <!-- Blog Post 7 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">11/03/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    Not much happened today. As usual, Vince took his biweekly absence, and gave us a DOUBLE-SIDED reading guide, while the second-period class gets to do IXLs. I think he took too much fentanyl the day before. Yesterday, I added a mobile-friendly menu, if you haven't noticed already, but I can't quite seem to get the settings page working. Brendan also finally won his first Gimkit game in about a week. By the way, yesterday was also Daylight Savings Day, which sucks because it messes up my sleep cycle and is essentially pointless. Plus, it just makes converting between time zones more difficult because some countries use DST and some don't. Also, yesterday I was on a call with Jayson and Neel, which was really fun. I wish that I could talk to them more often or even in person, but unfortunately thats impossible to do right now ðŸ˜¢.
                </p>
            </section>
            <!-- Blog Post 6 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">10/31/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                  Today in English, we watched a Twilight Zone episode where an insane dude sees a weird labubu destroying a plane but only he can see it. The episode is called 'Nightmare at 20,000 Feet'. As a plane nerd, obviously I notice a couple of problems. First, it was filmed in a non-pressurized-type airframe, which can't fly at 20,000 ft. Second, the labubu person somehow didn't get flung off when he was standing vertical on a wing in the middle of a storm, and theres a few more that aren't as big. Also, when I went to raid peoples' candy, the Seattle weather completely soaked me. Also, I didn't have a costume so I just taped an image of Pete Hegseth on my face. (Note: I know this post says its October 31st, technically I'm writing this on November 1st because its 12:27 AM right now)
                </p>
            </section>
            <!-- Blog Post 5 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">10/29/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                  Honestly, I'm not sure how my school is #1 in Washington state. First, it was that half the class didn't know which direction the sun rises. Then, Appoline and Anelia didn't know what a rhombus was, even though Lua warned them that a past student also didn't know the shape from the first-grade curriculum. Then, yesterday, Viyan didn't know the difference between beer, red wine and white wine. Rohit also asked if someone can be addicted to port wine (which is how Vince went on the ramble on addictions). Then today, Anelia said that you can only see the moon when it crosses in front of the sun. Olivia says the sun just appears because of the day and disappears at night. Also, Viyan doesn't know the definition of 'latter', and he keeps trying to steal my food. Also, if you have any new feature recommendations, please email me.
                </p>
            </section>
            <!-- Blog Post 4 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">10/28/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    Today in English, Vince yapped for so long about types of wine and wine addictions and drug addictions (he's such a hypocrite). Speaking of him, today he was a total of ten minutes late to class. In tennis baseball, I got three people out while I was at first base. Raymond also hit the ball straight up into the air nine times in a row and he kept getting foul balls. I decided to add a comments section to this page, but I then removed it shortly after because the Firestore dynamic content box wouldn't load. Also, if you haven't noticed already, I tweaked the format for this page a bit.
                    
                </p>
            </section>
            <!-- Blog Post 3 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">10/27/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    I got around a 93% on the science test because I mixed up incomplete dominance and codominance. I also did a lot of editing to this website, which included adding two extra pages and a slight tweak in the menu UI. Mobile-friendly menus will come in the near future. I created an archive page for my blog posts over three months old so that this page doesn't get too cluttered, and I added a changelog/version history page with descriptions for each update. By the way, I have decided to not move this website back to w3spaces, so it should be here to stay until I decide otherwise. Also, I'm not dressing up for Halloween; I'm just gonna go raid peoples' candy. I've recently gotten an interest into optical disks (DVD, CD, Blu-ray, etc.), electro-mechanical disks (HDD), and similar disk-based storage methods. Also, in the lossless vs. lossy audio compression thing, I personally prefer lossy (mp3), since it is a much smaller file and there is no noticable difference between the compressed and uncompressed files. Additionally, mp3 is also the mainstream audio file compression format and is widely supported. Also, I have an SAT exam scheduled on December 6th, so I have to start practicing. For AP, testing doesn't happen until around May, so I have more time with that.
                </p>
            </section>

            <!-- Blog Post 2 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">10/26/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    I moved the website to this webpage today since cookies weren't working on the previous platform. I might move the website back and I'm still learning to use the Cloudflare platform. I have a science test tomorrow and I have to review 64 terms. Vince yelled at Brendan during dodgeball on Friday because the ball bounced off a wall, Brendan blocked it, and Vince claimed it hit his chest.
                </p>
            </section>

            <!-- Blog Post 1 -->
            <section class="mt-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg border border-dashed border-gray-300 dark:border-gray-600">
                <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2">10/25/2025</h2>
                <hr class="mb-3 border-gray-300 dark:border-gray-600">
                <p class="text-gray-700 dark:text-gray-200 italic text-base leading-relaxed">
                    Today I created this website. It's kinda depressing here. Also the first time I touched HTML in around three years. I'm also really busy this semester so I don't know when the next time I post will be. I'll make this website more mobile-friendly in the near future. I also have a science test on Monday and a reading guide with five questions due on Tuesday. My FTC team isn't doing too well and I still need to practice for ACSL, SATs, and USACO.
                </p>
            </section>
            
            <!-- --------------------------------- -->
            <!-- 4. COMMENTS SECTION (FIREBASE) -->
            <!-- --------------------------------- -->
            <section class="mt-12 pt-8 border-t border-gray-300 dark:border-gray-700">
                <h2 class="text-3xl font-bold text-primary dark:text-primary-dark mb-4 border-b border-primary dark:border-primary-dark pb-2">
                    Comments
                </h2>

                <div id="auth-status" class="mb-4 p-3 bg-indigo-50 dark:bg-indigo-900 rounded-lg text-sm text-indigo-800 dark:text-indigo-200">
                    <!-- Status message will be inserted here -->
                    <span id="user-id-display">Connecting to the comment service...</span>
                </div>

                <!-- Comment Submission Form -->
                <form id="comment-form" class="mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-xl shadow-inner">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100">Leave a Comment</h3>
                    
                    <div class="mb-4">
                        <label for="comment-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Your Name (Optional)</label>
                        <input type="text" id="comment-name" name="name" maxlength="50" placeholder="Anonymous"
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary dark:bg-gray-600 dark:border-gray-500 dark:text-gray-100">
                    </div>
                    
                    <div class="mb-4">
                        <label for="comment-text" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Your Comment *</label>
                        <textarea id="comment-text" name="comment" rows="4" required minlength="5" maxlength="500" placeholder="What are your thoughts on this blog post?"
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary dark:bg-gray-600 dark:border-gray-500 dark:text-gray-100"></textarea>
                    </div>

                    <button type="submit" id="submit-button" disabled
                            class="submit-disabled w-full md:w-auto px-6 py-3 bg-primary text-white font-bold rounded-lg hover:bg-indigo-700 transition duration-300 shadow-lg">
                        Post Comment
                    </button>

                    <div id="form-message" class="mt-3 text-sm font-medium"></div>
                </form>

                <!-- Comments Display Area -->
                <h3 class="text-2xl font-semibold text-gray-800 dark:text-gray-100 mb-4">All Comments (<span id="comment-count">0</span>)</h3>
                <div id="comments-list" class="space-y-6">
                    <!-- Comments will be dynamically inserted here -->
                    <div id="loading-indicator" class="text-center p-8 text-gray-500 dark:text-gray-400">Loading comments...</div>
                </div>

            </section>
            
        </div>
    </main>

    <!-- 2. Footer -->
    <footer class="w-full bg-gray-100 dark:bg-gray-900 text-gray-500 dark:text-gray-400 text-center text-sm py-4 border-t dark:border-gray-700 mt-auto">
        <p>Last Updated (Excluding Blog Posts): 11/14/2025</p>
    </footer>

    <!-- 3. Cookie Consent Banner (Fixed Position) -->
    <!-- Banner uses fixed dark background, common for alerts, so no dark mode override needed -->
    <!-- Added bg-gray-800/80 and backdrop-blur-md for glassmorphism effect -->
    <div id="cookie-banner" class="fixed bottom-0 left-0 right-0 p-4 md:p-6 bg-gray-800/80 backdrop-blur-md text-white shadow-2xl transition-all duration-500 transform translate-y-0 z-50 opacity-100">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between">
            <p class="text-sm mb-3 md:mb-0 md:mr-6">
                This website uses cookies to ensure you get the best experience and to track web traffic. By continuing to use this site, you agree to our use of cookies.
            </p>
            <button id="accept-cookies" class="w-full md:w-auto px-6 py-2 bg-indigo-500 hover:bg-indigo-600 text-white font-semibold rounded-lg shadow-md transition duration-300 text-sm">
                Got it!
            </button>
        </div>
    </div>

    <!-- Scroll-to-Top Button uses responsive dark/light mode classes -->
    <!-- Added backdrop-blur-md, adjusted opacity on hover, and used semi-transparent bg colors -->
    <div id="scroll-to-top" onclick="scrollToTop()"
         class="w-12 h-12 flex items-center justify-center bg-blue-600/50 dark:bg-blue-500/50 backdrop-blur-md text-white rounded-full shadow-lg hover:bg-blue-600/70 dark:hover:bg-blue-500/70 transition duration-300">
        <!-- Up Arrow Icon -->
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg>
    </div>

    <!-- JavaScript for all interactions -->
    <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCJTduHsoftZ9jxzK2zGt89JKXhLhkeGk8",
    authDomain: "bobbyreichertwebpage.firebaseapp.com",
    projectId: "bobbyreichertwebpage",
    storageBucket: "bobbyreichertwebpage.firebasestorage.app",
    messagingSenderId: "621093540176",
    appId: "1:621093540176:web:56cdb61804298e570c1c55",
    measurementId: "G-GJ4RV7NNXH"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);

        // --- FIREBASE GLOBALS ---
        let db;
        let auth;
        let currentUserId = null;
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        const COMMENTS_COLLECTION_PATH = `artifacts/${appId}/public/data/blog_comments`;
        
        

        // --- DOM Elements ---
        let mobileMenuButton;
        let mobileMenu;
        let hamburgerIcon;
        let closeIcon;
        let submitButton;
        let commentsList;
        let formMessage;
        let userIdDisplay;
        let commentCount;
        let loadingIndicator;
        let commentForm;

        // Match Media Query for OS preference
        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');

        // --- UTILITY FUNCTIONS ---
        
        /**
         * Sanitizes user input to prevent XSS attacks.
         * @param {string} str The input string to sanitize.
         * @returns {string} The sanitized string.
         */
        function sanitizeInput(str) {
            const temp = document.createElement('div');
            temp.textContent = str;
            return temp.innerHTML;
        }

        /**
         * Formats a Firebase timestamp or Date object into a readable string.
         * @param {object} timestamp A Firestore Timestamp object or Date.
         * @returns {string} Formatted date string.
         */
        function formatTimestamp(timestamp) {
            if (timestamp && timestamp.toDate) {
                return timestamp.toDate().toLocaleString('en-US', { 
                    year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' 
                });
            }
            if (timestamp instanceof Date) {
                return timestamp.toLocaleString('en-US', { 
                    year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' 
                });
            }
            return 'Just now';
        }

        /**
         * Shows a message in the form's feedback area.
         * @param {string} message The message text.
         * @param {string} type 'success' or 'error'.
         */
        function showFormMessage(message, type) {
            if (!formMessage) return;
            formMessage.textContent = message;
            if (type === 'error') {
                formMessage.className = 'mt-3 text-sm font-medium text-red-600 dark:text-red-400';
            } else if (type === 'success') {
                formMessage.className = 'mt-3 text-sm font-medium text-green-600 dark:text-green-400';
            } else {
                formMessage.className = 'mt-3 text-sm font-medium text-gray-500 dark:text-gray-400';
            }
            setTimeout(() => { formMessage.textContent = ''; }, 5000);
        }

        // --- FIREBASE LOGIC (Auto-setup using environment variables) ---

        /**
         * Initializes Firebase and handles user authentication.
         */
        async function setupFirebase() {
            try {
                // Check if the configuration object is empty after safe parsing
                if (Object.keys(firebaseConfig).length === 0) {
                    console.error("Firebase config is empty or invalid. Cannot initialize.");
                    userIdDisplay.innerHTML = "Error: Cannot connect to Firebase. Comment service configuration missing or invalid.";
                    submitButton.disabled = true;
                    submitButton.classList.add('submit-disabled');
                    loadingIndicator.textContent = "Comments service unavailable due to configuration error.";
                    return;
                }
                
                // Set debug logging for Firestore
                setLogLevel('Debug');
                
                const app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                auth = getAuth(app);
                
                // Use browser local persistence to maintain sign-in state across refreshes
                await setPersistence(auth, browserLocalPersistence);
                
                if (initialAuthToken) {
                    await signInWithCustomToken(auth, initialAuthToken);
                } else {
                    await signInAnonymously(auth);
                }

                // Wait for auth state change to ensure user ID is ready
                onAuthStateChanged(auth, (user) => {
                    if (user) {
                        currentUserId = user.uid;
                        // Display full user ID as required
                        userIdDisplay.innerHTML = `âœ… Comment Service Ready. Signed in as: <span class="font-bold break-all">${currentUserId}</span>`;
                        submitButton.disabled = false;
                        submitButton.classList.remove('submit-disabled');
                        loadComments(); // Start listening for comments after successful auth
                    } else {
                        // Fallback to random ID if auth fails, but keep commenting disabled
                        currentUserId = crypto.randomUUID(); 
                        userIdDisplay.innerHTML = `Error: Authentication failed. Using temporary ID: <span class="font-bold break-all">${currentUserId}</span>. Cannot post comments without full authentication.`;
                        submitButton.disabled = true;
                        submitButton.classList.add('submit-disabled');
                        console.warn("Authentication failed, signed in with local UUID.");
                    }
                });

            } catch (error) {
                // This catch handles general initialization errors
                console.error("Error setting up Firebase:", error);
                userIdDisplay.innerHTML = `Error: **Cannot connect to database.** (${error.code || error.message}).`;
                submitButton.disabled = true;
                submitButton.classList.add('submit-disabled');
                loadingIndicator.textContent = "Comments service unavailable due to a connection or configuration error.";
            }
        }

        /**
         * Attaches a real-time listener to the comments collection and renders them.
         */
        function loadComments() {
            if (!db || !currentUserId) {
                console.error("Firestore not initialized or user ID missing.");
                return;
            }
            
            const commentsQuery = query(
                collection(db, COMMENTS_COLLECTION_PATH)
                // Note: Sorting is done in-memory to avoid mandatory index creation issues
            );

            // Set up real-time listener
            onSnapshot(commentsQuery, (snapshot) => {
                const comments = [];
                snapshot.forEach(doc => {
                    comments.push({ id: doc.id, ...doc.data() });
                });
                
                // Sort the comments by timestamp (newest first) in memory
                comments.sort((a, b) => {
                    const timeA = a.timestamp ? a.timestamp.toMillis() : 0;
                    const timeB = b.timestamp ? b.timestamp.toMillis() : 0;
                    return timeB - timeA;
                });
                
                renderComments(comments);
            }, (error) => {
                console.error("Error listening to comments:", error);
                loadingIndicator.textContent = "Error loading comments.";
            });
        }
        
        /**
         * Renders the list of comments to the DOM.
         * @param {Array<object>} comments - Array of comment objects.
         */
        function renderComments(comments) {
            commentsList.innerHTML = '';
            commentCount.textContent = comments.length;

            if (comments.length === 0) {
                commentsList.innerHTML = `<div class="text-center p-8 text-gray-500 dark:text-gray-400">Be the first to leave a comment!</div>`;
                return;
            }
            
            comments.forEach(comment => {
                const dateString = formatTimestamp(comment.timestamp);
                const userName = sanitizeInput(comment.name || 'Anonymous');
                const commentText = sanitizeInput(comment.text);
                
                const commentElement = document.createElement('div');
                commentElement.className = 'p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 shadow-sm transition duration-150 hover:shadow-md';
                commentElement.innerHTML = `
                    <div class="flex items-start justify-between">
                        <p class="font-bold text-lg text-primary dark:text-primary-dark">${userName}</p>
                        <p class="text-xs text-gray-500 dark:text-gray-400">${dateString}</p>
                    </div>
                    <p class="mt-2 text-gray-700 dark:text-gray-200 whitespace-pre-wrap">${commentText}</p>
                    <div class="mt-2 text-xs text-gray-400 dark:text-gray-500 border-t border-dashed border-gray-100 dark:border-gray-700 pt-2 break-all">
                        Posted by user ID: ${comment.userId}
                    </div>
                `;
                commentsList.appendChild(commentElement);
            });
        }
        
        /**
         * Handles the form submission to post a new comment.
         * @param {Event} event 
         */
        async function submitComment(event) {
            event.preventDefault();
            
            if (!db || !currentUserId || submitButton.disabled) {
                showFormMessage("Comment service is not ready or authentication failed.", 'error');
                return;
            }

            const nameInput = document.getElementById('comment-name').value;
            const textInput = document.getElementById('comment-text').value;

            const name = nameInput.trim() || 'Anonymous';
            const text = textInput.trim();

            if (text.length < 5 || text.length > 500) {
                showFormMessage("Comment must be between 5 and 500 characters.", 'error');
                return;
            }
            
            submitButton.disabled = true;
            submitButton.classList.add('submit-disabled');
            submitButton.textContent = 'Posting...';

            try {
                const newComment = {
                    name: sanitizeInput(name),
                    text: sanitizeInput(text),
                    userId: currentUserId,
                    timestamp: serverTimestamp() 
                };

                await addDoc(collection(db, COMMENTS_COLLECTION_PATH), newComment);
                
                showFormMessage("Comment posted successfully!", 'success');
                document.getElementById('comment-text').value = ''; // Clear only the comment text
                document.getElementById('comment-name').value = ''; // Clear name input as well
            } catch (e) {
                console.error("Error adding document: ", e);
                showFormMessage(`Failed to post comment. Error: ${e.message}`, 'error');
            } finally {
                submitButton.disabled = false;
                submitButton.classList.remove('submit-disabled');
                submitButton.textContent = 'Post Comment';
            }
        }
        

        const THEME_KEY = 'app-theme-mode'; // Key used to store theme preference
        const COOKIE_KEY = 'cookiesAccepted';

        /**
         * Applies the 'dark' class to the HTML element based on the resolved theme.
         * @param {string} theme 'light', 'dark', or 'system'.
         */
        function applyTheme(theme) {
            const html = document.documentElement;
            let resolvedTheme = theme;

            if (theme === 'system') {
                resolvedTheme = mediaQuery.matches ? 'dark' : 'light';
            }

            if (resolvedTheme === 'dark') {
                html.classList.add('dark');
            } else {
                html.classList.remove('dark');
            }
        }
        
        // Sets up listener for OS theme changes if 'system' is selected.
        function setupSystemThemeListener() {
            mediaQuery.addEventListener('change', () => {
                const currentPreference = localStorage.getItem(THEME_KEY) || 'system';
                if (currentPreference === 'system') {
                    applyTheme('system');
                }
            });
        }
        
        /**
         * Toggles the mobile navigation menu open and closed.
         */
        function toggleMobileMenu() {
            if (!mobileMenu || !mobileMenuButton) return; 

            const isOpen = mobileMenu.classList.contains('open');
            mobileMenu.classList.toggle('open');
            
            // Toggle icons and aria-expanded state
            if (isOpen) {
                hamburgerIcon.classList.remove('hidden');
                closeIcon.classList.add('hidden');
                mobileMenuButton.setAttribute('aria-expanded', 'false');
            } else {
                hamburgerIcon.classList.add('hidden');
                closeIcon.classList.remove('hidden');
                mobileMenuButton.setAttribute('aria-expanded', 'true');
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // 1. Initialize Theme Mode
            const initialThemeMode = localStorage.getItem(THEME_KEY) || 'system';
            applyTheme(initialThemeMode);
            setupSystemThemeListener();

            // 2. Initialize DOM elements
            mobileMenuButton = document.getElementById('mobile-menu-button');
            mobileMenu = document.getElementById('mobile-menu');
            hamburgerIcon = document.getElementById('hamburger-icon');
            closeIcon = document.getElementById('close-icon');
            
            submitButton = document.getElementById('submit-button');
            commentsList = document.getElementById('comments-list');
            formMessage = document.getElementById('form-message');
            userIdDisplay = document.getElementById('user-id-display');
            commentCount = document.getElementById('comment-count');
            loadingIndicator = document.getElementById('loading-indicator');
            commentForm = document.getElementById('comment-form');

            // 3. Setup Firebase
            setupFirebase();
            
            // 4. Comment form listener
            if (commentForm) {
                commentForm.addEventListener('submit', submitComment);
            }

            // --- Cookie Consent Logic ---
            const banner = document.getElementById('cookie-banner');
            const acceptButton = document.getElementById('accept-cookies');

            const accepted = localStorage.getItem(COOKIE_KEY);

            if (accepted === 'true') {
                if (banner) {
                    banner.style.display = 'none';
                }
            } else {
                if (banner) {
                    banner.style.display = 'block';
                }

                if (acceptButton) {
                    acceptButton.addEventListener('click', () => {
                        localStorage.setItem(COOKIE_KEY, 'true');

                        if (banner) {
                            banner.classList.add('fade-out');
                            setTimeout(() => {
                                banner.style.display = 'none';
                            }, 500);
                        }
                    });
                }
            }

            // --- Dropdown Toggle Logic (More Menu) ---
            const dropdown = document.getElementById('more-dropdown');
            const button = dropdown.querySelector('button');
            const menu = document.getElementById('more-menu-items');

            // Function to show/hide menu on button click (for accessibility/mobile toggle)
            const toggleMenu = () => {
                menu.classList.toggle('visible');
                const isExpanded = menu.classList.contains('visible');
                button.setAttribute('aria-expanded', isExpanded);
            };
            
            // Function to show the menu (for hover)
            const showMenu = () => {
                 if (window.innerWidth >= 768) {
                    menu.classList.add('visible');
                    button.setAttribute('aria-expanded', 'true');
                 }
            };

            // Function to hide the menu (for hover)
            const hideMenu = () => {
                if (window.innerWidth >= 768) {
                    menu.classList.remove('visible');
                    button.setAttribute('aria-expanded', 'false');
                }
            };

            // Desktop hover behavior
            dropdown.addEventListener('mouseenter', showMenu);
            dropdown.addEventListener('mouseleave', hideMenu);

            // Click behavior for accessibility and mobile (on desktop dropdown button)
            button.addEventListener('click', toggleMenu);

            // Close dropdown when clicking outside of it
            document.addEventListener('click', (event) => {
                if (window.innerWidth >= 768 && !dropdown.contains(event.target) && menu.classList.contains('visible')) {
                    hideMenu();
                }
            });

            // --- Mobile Menu Listeners ---
            if (mobileMenuButton) {
                mobileMenuButton.addEventListener('click', toggleMobileMenu);

                // Close mobile menu when a link inside is clicked
                if (mobileMenu) {
                    mobileMenu.querySelectorAll('a').forEach(link => {
                        link.addEventListener('click', () => {
                            if (mobileMenu.classList.contains('open')) {
                                // Add a short delay to allow link navigation to process before menu closes smoothly
                                setTimeout(toggleMobileMenu, 100); 
                            }
                        });
                    });
                }
            }
        });

        // --- SCROLL-TO-TOP LOGIC ---
        const scrollButton = document.getElementById('scroll-to-top');

        // Function to check scroll position and show/hide the button
        function checkScroll() {
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                if (scrollButton) scrollButton.classList.add('show');
            } else {
                if (scrollButton) scrollButton.classList.remove('show');
            }
        }

        // Function to scroll smoothly to the top
        window.scrollToTop = function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        };

        // Add event listener for scrolling
        window.onscroll = function() {
            checkScroll();
        };
        // Initial check on load
        document.addEventListener('DOMContentLoaded', checkScroll);
    </script>
</body>
</html>